(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[743],{3736:function(n,e,r){Promise.resolve().then(r.bind(r,3639))},3639:function(n,e,r){"use strict";r.r(e),r.d(e,{default:function(){return l}});var t=r(7904),i=r(4725),o=r(3455),u=r(618),d=r(4889),a=r(3807);function l(){let[n,e]=(0,i.useState)([]),[r,l]=(0,i.useState)(!0),[c,s]=(0,i.useState)(null),[f,p]=(0,i.useState)(null),{data:m}=(0,a.useSession)(),h=async()=>{l(!0),s(null);try{let n=await fetch("/api/admin/users"),r=await n.json();if(r.error)throw Error(r.error);e(r)}catch(n){s(n.message)}finally{l(!1)}};(0,i.useEffect)(()=>{h()},[]);let g=async(n,r)=>{p(n);try{let t=await fetch("/api/admin/users/".concat(n,"/status"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:r})}),i=await t.json();if(i.error)throw Error(i.error);e(e=>e.map(e=>e.id===n?{...e,status:i.status}:e))}catch(n){alert(n.message)}finally{p(null)}},x=n=>{var e;return(null==m?void 0:null===(e=m.user)||void 0===e?void 0:e.email)===n.email},b={background:"#e5e7eb",color:"#fff",opacity:.5,cursor:"not-allowed"};return(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(u.Dx,{children:"회원관리"}),(0,t.jsxs)("div",{style:{marginTop:24,color:"#666"},children:[(0,t.jsx)(u.DK,{children:"회원 목록"}),r?(0,t.jsx)("div",{children:"로딩 중..."}):c?(0,t.jsx)("div",{style:{color:"red"},children:c}):(0,t.jsxs)("table",{style:{width:"100%",marginTop:16,borderCollapse:"collapse"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f8fafc",color:"#222",fontWeight:700},children:[(0,t.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"이메일"}),(0,t.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"이름"}),(0,t.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"권한"}),(0,t.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"가입일"}),(0,t.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"상태"}),(0,t.jsx)("th",{style:{padding:"10px 8px",textAlign:"left"},children:"관리"})]})}),(0,t.jsx)("tbody",{children:n.map(n=>{var r;let i=x(n);return(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,t.jsx)("td",{style:{padding:"10px 8px"},children:n.email}),(0,t.jsx)("td",{style:{padding:"10px 8px"},children:n.name||"-"}),(0,t.jsx)("td",{style:{padding:"10px 8px"},children:n.is_admin?"관리자":"일반"}),(0,t.jsx)("td",{style:{padding:"10px 8px"},children:null===(r=n.created_at)||void 0===r?void 0:r.slice(0,10)}),(0,t.jsx)("td",{style:{padding:"10px 8px",fontWeight:600},children:n.status}),(0,t.jsxs)("td",{style:{padding:"10px 8px",display:"flex",gap:8},children:["정상"===n.status&&(0,t.jsx)(d.KM,{style:i?{padding:"0.3rem 1.2rem",fontSize:14,...b}:{padding:"0.3rem 1.2rem",fontSize:14},disabled:f===n.id||i,onClick:()=>g(n.id,"정지"),children:"정지"}),"정지"===n.status&&(0,t.jsx)(d.KM,{style:i?{padding:"0.3rem 1.2rem",fontSize:14,...b}:{padding:"0.3rem 1.2rem",fontSize:14},disabled:f===n.id||i,onClick:()=>g(n.id,"정상"),children:"복귀"}),"탈퇴"!==n.status&&(0,t.jsx)(d.KM,{style:i?{padding:"0.3rem 1.2rem",fontSize:14,...b}:{padding:"0.3rem 1.2rem",fontSize:14,background:"#e5e7eb",color:"#222"},disabled:f===n.id||i,onClick:()=>g(n.id,"탈퇴"),children:"탈퇴"}),(0,t.jsx)(d.KM,{style:i?{padding:"0.3rem 1.2rem",fontSize:14,...b}:{padding:"0.3rem 1.2rem",fontSize:14,background:n.is_admin?"#e5e7eb":"#4d8888",color:n.is_admin?"#222":"#fff"},disabled:f===n.id||i,onClick:async()=>{if(!i){p(n.id);try{let r=await fetch("/api/admin/users/".concat(n.id,"/status"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_admin:!n.is_admin})}),t=await r.json();if(t.error)throw Error(t.error);e(e=>e.map(e=>e.id===n.id?{...e,is_admin:t.is_admin}:e))}catch(n){alert(n.message)}finally{p(null)}}},children:n.is_admin?"관리자해제":"관리자부여"})]})]},n.id)})})]})]})]})}},4889:function(n,e,r){"use strict";r.d(e,{$m:function(){return s},KM:function(){return c},TX:function(){return f},yw:function(){return p}});var t=r(2260),i=r(8313);function o(){let n=(0,t._)(["\n  padding: 0.9rem 0;\n  width: 100%;\n  background: ",";\n  color: #ffffff;\n  font-weight: 800;\n  font-size: 1.1rem;\n  border-radius: 1rem;\n  border: none;\n  box-shadow: 0 2px 8px rgba(40, 96, 96, 0.08);\n  transition: background 0.2s, color 0.2s;\n  cursor: pointer;\n  &:hover {\n    background: ",";\n    color: ",";\n  }\n  &:disabled {\n    background: #e5e7eb;\n    color: #fff;\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]);return o=function(){return n},n}function u(){let n=(0,t._)(["\n  background: ",";\n  color: #fff;\n  &:hover {\n    background: ",";\n  }\n"]);return u=function(){return n},n}function d(){let n=(0,t._)(["\n  background: ",";\n  &:hover {\n    background: ",";\n  }\n"]);return d=function(){return n},n}function a(){let n=(0,t._)(["\n  flex: 1 1 0;\n  min-width: 0;\n  max-width: none;\n  border-radius: 0.5rem;\n  padding: 1.2rem 0;\n  font-weight: bold;\n  font-size: 1.1rem;\n  margin: 0 4px;\n  border: none;\n  box-shadow: none;\n  color: ",";\n  background: ",";\n  transition: all 0.2s;\n  &:hover {\n    opacity: 0.92;\n    box-shadow: none;\n  }\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n"]);return a=function(){return n},n}function l(){let n=(0,t._)(["\n  display: flex;\n  flex-direction: row;\n  gap: 8px;\n  width: 100%;\n  justify-content: space-between;\n  align-items: stretch;\n"]);return l=function(){return n},n}let c=i.ZP.button(o(),n=>{let{theme:e}=n;return e.primary},n=>{let{theme:e}=n;return e.primaryDark},n=>{let{theme:e}=n;return e.primaryLight}),s=(0,i.ZP)(c)(u(),n=>{let{theme:e}=n;return e.error},n=>{let{theme:e}=n;return e.primaryDark}),f=(0,i.ZP)(c)(d(),n=>{let{theme:e}=n;return e.primary},n=>{let{theme:e}=n;return e.primaryDark}),p=i.ZP.button(a(),n=>{let{theme:e,$type:r,$selected:t}=n;return t?"#000":"like"===r?e.primary:"neutral"===r?e.neutral:e.dislike},n=>{let{theme:e,$type:r,$selected:t}=n;return t?"like"===r?e.primary:"neutral"===r?e.neutral:e.dislike:e.background});i.ZP.div(l())},3455:function(n,e,r){"use strict";var t=r(2260);function i(){let n=(0,t._)(["\n  background: #fff;\n  border-radius: 1.5rem;\n  box-shadow: none;\n  padding: 2rem 1.5rem;\n  margin-bottom: ",";\n  border: none;\n"]);return i=function(){return n},n}let o=r(8313).ZP.div(i(),n=>{let{marginBottom:e}=n;return e||"2rem"});e.Z=o},618:function(n,e,r){"use strict";r.d(e,{DK:function(){return w},Dx:function(){return y},FN:function(){return k},HN:function(){return v},IK:function(){return C},J7:function(){return _},KH:function(){return K},WD:function(){return z},_1:function(){return Z},h4:function(){return S},u6:function(){return A},vb:function(){return P},vx:function(){return j},y:function(){return D}});var t=r(2260),i=r(8313);function o(){let n=(0,t._)(["\n  font-size: 2rem;\n  color: ",";\n  font-weight: 900;\n"]);return o=function(){return n},n}function u(){let n=(0,t._)(["\n  font-size: 1.1rem;\n  color: ",";\n  font-weight: 600;\n"]);return u=function(){return n},n}function d(){let n=(0,t._)(["\n  font-size: 0.8rem;\n  font-weight: 500;\n  color: ",";\n  background: ",";\n  padding: 0.5rem 1.4rem;\n  border-radius: 1.2rem;\n  min-width: 120px; // ← 원하는 값으로 추가\n  display: inline-block; // width 적용을 위해\n"]);return d=function(){return n},n}function a(){let n=(0,t._)(["\n  height: 100px;\n  width: auto;\n  max-width: 100%;\n  object-fit: contain;\n  @media (max-width: 600px) {\n    height: 48px;\n  }\n"]);return a=function(){return n},n}function l(){let n=(0,t._)(["\n  margin-top: 0.5rem;\n  font-size: 1rem;\n  font-weight: 700;\n  color: #222;\n  opacity: 0.9;\n"]);return l=function(){return n},n}function c(){let n=(0,t._)(["\n  font-weight: 700;\n  font-size: 1.25rem;\n  color: #222;\n  margin-bottom: 1.5rem;\n  line-height: 1.4;\n"]);return c=function(){return n},n}function s(){let n=(0,t._)(["\n  font-size: 0.9rem;\n  color: #3b82f6;\n  font-weight: 600;\n"]);return s=function(){return n},n}function f(){let n=(0,t._)(["\n  font-size: 0.9rem;\n  color: #a3a3a3;\n"]);return f=function(){return n},n}function p(){let n=(0,t._)(["\n  display: inline-block;\n  padding: 0.3rem 1rem;\n  font-size: 0.8rem;\n  font-weight: 600;\n  border-radius: 1rem;\n  background: #dbeafe;\n  color: #2563eb;\n"]);return p=function(){return n},n}function m(){let n=(0,t._)(["\n  display: inline-block;\n  padding: 0.3rem 1rem;\n  font-size: 0.8rem;\n  font-weight: 600;\n  border-radius: 1rem;\n  background: ",";\n  color: ",";\n"]);return m=function(){return n},n}function h(){let n=(0,t._)(["\n  color: #888;\n  font-size: 0.95rem;\n"]);return h=function(){return n},n}function g(){let n=(0,t._)(["\n  color: #a3a3a3;\n  font-size: 0.95rem;\n"]);return g=function(){return n},n}function x(){let n=(0,t._)(["\n  color: #e5e7eb;\n  margin: 0 0.3rem;\n"]);return x=function(){return n},n}function b(){let n=(0,t._)(["\n  color: #ef4444;\n  margin-top: 8px;\n  font-size: 13px;\n"]);return b=function(){return n},n}let y=i.ZP.h1(o(),n=>{let{theme:e}=n;return e.primary}),w=i.ZP.h2(u(),n=>{let{theme:e}=n;return e.primary}),j=i.ZP.span(d(),n=>{let{theme:e}=n;return e.text},n=>{let{theme:e}=n;return e.background}),k=i.ZP.img(a()),_=i.ZP.div(l()),v=i.ZP.div(c()),z=i.ZP.span(s()),P=i.ZP.span(f()),Z=i.ZP.span(p()),S=i.ZP.span(m(),n=>{let{$closed:e}=n;return e?"#fee2e2":"#dcfce7"},n=>{let{$closed:e}=n;return e?"#dc2626":"#16a34a"}),C=i.ZP.span(h()),K=i.ZP.span(g()),A=i.ZP.span(x()),D=i.ZP.div(b())},2260:function(n,e,r){"use strict";function t(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}r.d(e,{_:function(){return t}})}},function(n){n.O(0,[313,807,501,361,744],function(){return n(n.s=3736)}),_N_E=n.O()}]);